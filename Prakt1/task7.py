"""
–í—Ä–∞—â–∞–π—Ç–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫
ùêø = [[3, ‚àí1],
     [4, 1],
     [2, 1]]
–Ω–∞ 90 –≥—Ä–∞–¥—É—Å–æ–≤ (ùúã/2) –ø—Ä–æ—Ç–∏–≤ —á–∞—Å–æ–≤–æ–π —Å—Ç—Ä–µ–ª–∫–∏ —Å –ø–æ–º–æ—â—å—é –º–∞—Ç—Ä–∏—Ü—ã:
ùëá = [[0, 1],
     [‚àí1, 0]]
–ü–µ—Ä–µ–¥ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è–º–∏ —É–º–Ω–æ–∂—å—Ç–µ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ –º–∞—Ç—Ä–∏—Ü—É –æ—Ç—Ä–µ–∑–∫–∞ ùêø –Ω–∞ 100, —á—Ç–æ–±—ã
–æ–Ω –∏ –µ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –∏–º–µ–ª–∏ –≤–∏–¥–∏–º—É—é –¥–ª–∏–Ω—É –≤ –ø–∏–∫—Å–µ–ª—è—Ö. –ö–∞–∫ –∏ –≤
–ø—Ä–µ–¥—ã–¥—É—â–µ–π –∑–∞–¥–∞—á–µ, —Å–º–µ—â–∞–π—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫, —á—Ç–æ–±—ã –æ–Ω –±—ã–ª –≤–∏–¥–µ–Ω –Ω–∞
—ç–∫—Ä–∞–Ω–µ (—Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é –º–∞—Ç—Ä–∏—Ü—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ–π –º–∞—Ç—Ä–∏—Ü–µ ùêø !),
–ø–æ—Å–ª–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –º–∞—Ç—Ä–∏—Ü—ã ùêø —Å–º–µ—Å—Ç–∏—Ç–µ –Ω–∞ —Ç–∞–∫–æ–µ –∂–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∏–∫—Å–µ–ª–µ–π –≤
–≤–∏–¥–∏–º—É—é –æ–±–ª–∞—Å—Ç—å –æ–∫–Ω–∞ –Ω–æ–≤—ã–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ ùêø.
"""

import numpy as np
import pygame
import sys


def transform_triangle(triangle, transformation_matrix):
    # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∞—Ç—Ä–∏—á–Ω–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∫ –≤–µ—Ä—à–∏–Ω–∞–º —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞
    new_vertices = []
    for vertex in triangle:
        new_vertex = transformation_matrix @ vertex
        new_vertices.append(new_vertex)
    return np.array(new_vertices)


def main():
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Pygame
    pygame.init()

    # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –æ–∫–Ω–∞
    width, height = 800, 600
    screen = pygame.display.set_mode((width, height))
    pygame.display.set_caption("–í—Ä–∞—â–µ–Ω–∏–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞")

    # –ò—Å—Ö–æ–¥–Ω—ã–π —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ (—É–º–Ω–æ–∂–µ–Ω–Ω—ã–π –Ω–∞ 100 –¥–ª—è –≤–∏–¥–∏–º–æ—Å—Ç–∏)
    L = np.array([[3, -1],
                  [4, 1],
                  [2, 1]]) * 100

    # –ú–∞—Ç—Ä–∏—Ü–∞ –≤—Ä–∞—â–µ–Ω–∏—è T
    T = np.array([[0, 1],
                  [-1, 0]])

    # –°–º–µ—â–µ–Ω–∏–µ –¥–ª—è –≤–∏–¥–∏–º–æ—Å—Ç–∏
    offset_x, offset_y = 400, 450

    # –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞
    L_transformed = transform_triangle(L, T) + np.array([offset_x, offset_y])

    # –°–º–µ—â–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞
    L = L + np.array([offset_x, offset_y])

    # –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª Pygame
    running = True
    while running:
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                running = False

        # –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–∞
        screen.fill((255, 255, 255))

        # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ (–∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç)
        pygame.draw.polygon(screen, (255, 0, 0), L)

        # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞ (—Å–∏–Ω–∏–π —Ü–≤–µ—Ç)
        pygame.draw.polygon(screen, (0, 0, 255), L_transformed)

        # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –æ—Å–µ–π
        pygame.draw.line(screen, (0, 0, 0), (0, height // 2), (width, height // 2), 2)  # –û—Å—å X
        pygame.draw.line(screen, (0, 0, 0), (width // 2, 0), (width // 2, height), 2)  # –û—Å—å Y

        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞
        pygame.display.flip()

    # –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ Pygame
    pygame.quit()
    sys.exit()


if __name__ == "__main__":
    main()